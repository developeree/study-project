<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="loginSql">
	
	<select id="login" resultType="com.study_project.web.user.model.User" parameterType="com.study_project.web.user.model.User">
		SELECT
			*
		FROM
			user_info
		WHERE
			id = #{id}
		AND
		AES_DECRYPT(UNHEX(password), #{password})
<!-- 			password =#{password}  -->
	</select>
	
	<insert id="insertUser" parameterType="com.study_project.web.user.model.User">
		INSERT INTO user_info
		(
			name,
			gender,
			mail,
			id,
			password,
			birth,
			phone
		)
		VALUES
		(
			#{name},
			#{gender},
			#{mail},
			#{id},
<!-- 			이렇게 하니까 암호화된걸 직업 써줘야댐..비번이 1이면 1로 로그인 안대고 암호화를 쳐야.. -->
			HEX(AES_ENCRYPT(#{password}, #{password})),
<!-- 			#{password}, -->
			#{birth},
			#{phone}
		)
	</insert>
	
</mapper>